(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b782d99"],{"03e4":function(e,t,r){},"2de4":function(e,t,r){"use strict";var a=r("03e4"),n=r.n(a);n.a},"4ef5":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"setting-container"},[r("el-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("my-bread",[e._v("个人设置")])],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form",{attrs:{"label-width":"120px"}},[r("el-form-item",{attrs:{label:"编号："}},[e._v(e._s(e.userInfo.id))]),r("el-form-item",{attrs:{label:"手机："}},[e._v(e._s(e.userInfo.mobile))]),r("el-form-item",{attrs:{label:"媒体名称："}},[r("el-input",{model:{value:e.userInfo.name,callback:function(t){e.$set(e.userInfo,"name",t)},expression:"userInfo.name"}})],1),r("el-form-item",{attrs:{label:"媒体介绍："}},[r("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.userInfo.intro,callback:function(t){e.$set(e.userInfo,"intro",t)},expression:"userInfo.intro"}})],1),r("el-form-item",{attrs:{label:"邮箱："}},[r("el-input",{model:{value:e.userInfo.email,callback:function(t){e.$set(e.userInfo,"email",t)},expression:"userInfo.email"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateUser()}}},[e._v("保存设置")])],1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","http-request":e.uploadPhoto,"show-file-list":!1}},[e.userInfo.photo?r("img",{staticClass:"avatar",attrs:{src:e.userInfo.photo}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),r("p",{staticClass:"adit-photo"},[e._v("修改头像")])],1)],1)],1)],1)},n=[],s=(r("b0c0"),r("96cf"),r("1da1")),o=r("986e"),i=r("5f87"),u={name:"my-setting",data:function(){return{userInfo:{name:"111",intro:"",email:"",photo:""},headers:{Authorization:"Bearer ".concat(i["a"].getUser().token)}}},created:function(){this.getUserInfo()},methods:{uploadPhoto:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n,s,u,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.file,n=new FormData,n.append("photo",a),r.next=5,t.$http.patch("user/photo",n);case 5:s=r.sent,u=s.data.data,t.$message.success("修改头像成功"),t.userInfo.photo=u.photo,o["a"].$emit("updateUserPhoto",u.photo),c=i["a"].getUser(),c.photo=u.photo,i["a"].setUser(c);case 13:case"end":return r.stop()}}),r)})))()},getUserInfo:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("user/profile");case 2:r=t.sent,a=r.data.data,e.userInfo=a;case 5:case"end":return t.stop()}}),t)})))()},updateUser:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=e.userInfo,a=r.name,n=r.intro,s=r.email,t.next=4,e.$http.patch("user/profile",{name:a,intro:n,email:s});case 4:e.$message.success("修改成功"),o["a"].$emit("updateUserName",a),u=i["a"].getUser(),u.name=a,i["a"].setUser(u),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),t.t0.response&&409===t.t0.response.status?e.$message.error("用户名已存在！"):e.$message.error("修改失败！");case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}}},c=u,l=(r("2de4"),r("2877")),p=Object(l["a"])(c,a,n,!1,null,"7209f5e6",null);t["default"]=p.exports},"986e":function(e,t,r){"use strict";var a=r("2b0e");t["a"]=new a["default"]}}]);
//# sourceMappingURL=chunk-3b782d99.5a6df392.js.map